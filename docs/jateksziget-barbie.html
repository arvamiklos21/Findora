<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>J√°t√©ksziget Barbie ‚Äì Bab√°k, szettek, kieg√©sz√≠t≈ëk | Findora</title>
  <meta name="description" content="J√°t√©ksziget Barbie k√≠n√°lat: divatbab√°k, Dreamhouse, j√°t√©kszettek √©s kieg√©sz√≠t≈ëk ‚Äì friss √°rak √©s akci√≥k a Findora.hu-n." />
  <link rel="canonical" href="https://www.findora.hu/jateksziget-barbie.html" />
  <link rel="icon" href="assets/img/findora_mark.png" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    /* ===== A fix als√≥ nyilatkozat miatt legyen als√≥ bels≈ë marg√≥ ===== */
    :root{--pad-bottom:64px}
    body{padding-bottom:var(--pad-bottom)}

    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    .topbar{display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:8px}
    nav.menu{display:flex;gap:14px;flex-wrap:wrap}
    nav.menu a{text-decoration:none;color:#1a73e8;font-weight:600}
    nav.menu a:hover{text-decoration:underline}
    .back-home{display:inline-block;text-decoration:none;color:#1a73e8;font-weight:600}
    .back-home:hover{text-decoration:underline}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:#fff;border-radius:14px;padding:12px;box-shadow:0 4px 16px rgba(0,0,0,.06);display:flex;flex-direction:column}
    .thumb{height:180px;display:flex;align-items:center;justify-content:center;margin-bottom:8px}
    .thumb img{max-height:100%;max-width:100%;object-fit:contain}
    .title{font-weight:600;margin-bottom:6px}
    .price{font-weight:700;margin-top:auto}
    .cta a{display:inline-block;margin-top:10px;padding:10px 14px;border-radius:12px;background:#1a73e8;color:#fff;text-decoration:none}
    .muted{color:#64748b;font-size:.9rem}
    .toolbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:10px 0 18px}
    .pill{padding:6px 10px;border:1px solid #e2e8f0;border-radius:999px;background:#fff}
    .pager{display:flex;gap:8px;justify-content:center;margin:22px 0}
    .pager button{padding:8px 12px;border-radius:10px;border:1px solid #e2e8f0;background:#fff;cursor:pointer}
    .floating-home{position:fixed;right:16px;bottom:16px;z-index:50;background:#1a73e8;color:#fff;border-radius:999px;padding:10px 14px;text-decoration:none;box-shadow:0 10px 24px rgba(0,0,0,.18)}
    .floating-home:hover{filter:brightness(1.05)}
    footer{margin:28px 0 10px}
    .legal{color:#6b7280;font-size:.85rem}

    /* ===== Fixen alul l√°that√≥ affiliate-nyilatkozat ===== */
    .aff-disclosure{
      position:fixed;left:0;right:0;bottom:0;z-index:1000;
      background:#0f172a;color:#e2e8f0;
      font-size:.92rem;line-height:1.35;
      padding:10px 16px;box-shadow:0 -6px 18px rgba(0,0,0,.15);
    }
    .aff-disclosure a{color:#93c5fd;text-decoration:underline;font-weight:600}

    @media (max-width:480px){
      :root{--pad-bottom:78px}
      .aff-disclosure{font-size:.9rem;padding:12px}
    }
  </style>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"CollectionPage","name":"J√°t√©ksziget Barbie ‚Äì Bab√°k, szettek, kieg√©sz√≠t≈ëk","breadcrumb":{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Findora","item":"https://www.findora.hu/"},{"@type":"ListItem","position":2,"name":"J√°t√©ksziget Barbie","item":"https://www.findora.hu/jateksziget-barbie.html"}]}}
  </script>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <nav class="menu" aria-label="F≈ë navig√°ci√≥">
        <a href="https://www.findora.hu/">üè† F≈ëoldal</a>
        <a href="https://www.findora.hu/#otthon">Otthon</a>
        <a href="https://www.findora.hu/#sport">Sport</a>
        <a href="https://www.findora.hu/#jatekok">J√°t√©kok</a>
        <a href="https://www.findora.hu/#tech">Tech</a>
        <a href="https://www.findora.hu/#akciok">Akci√≥k</a>
      </nav>
      <a href="https://www.findora.hu" class="back-home">‚Üê Vissza a f≈ëoldalra</a>
    </div>

    <h1>J√°t√©ksziget Barbie</h1>
    <div class="muted">Barbie bab√°k, Dreamhouse, j√°t√©kszettek √©s kieg√©sz√≠t≈ëk ‚Äì √°rak 2 √≥r√°nk√©nt friss√ºlnek.</div>

    <div class="toolbar" role="region" aria-label="Sz≈±r≈ëk √©s rendez√©s">
      <label class="pill"><input id="onlyDiscount" type="checkbox" /> Csak akci√≥s</label>
      <label class="pill">Min. kedvezm√©ny:
        <input id="minDisc" type="number" min="0" max="90" step="5" value="0" style="width:70px" />%
      </label>
      <label class="pill">Kateg√≥ria:
        <select id="category">
          <option value="osszes">√ñsszes</option>
          <option value="babak">Bab√°k</option>
          <option value="szettek">J√°t√©kszettek</option>
          <option value="kiegeszitok">Kieg√©sz√≠t≈ëk</option>
          <option value="haz-jarmu">H√°zak/J√°rm≈±vek</option>
        </select>
      </label>
      <label class="pill">Rendez√©s:
        <select id="sortBy" aria-label="Rendez√©s √°r szerint">
          <option value="price-asc">√År: alacsonyt√≥l ‚Üí magasig</option>
          <option value="price-desc">√År: magast√≥l ‚Üí alacsonyig</option>
        </select>
      </label>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
    <div class="pager">
      <button id="prevBtn" disabled>El≈ëz≈ë</button>
      <span id="pageInfo" class="muted">1. oldal (dinamikus bet√∂lt√©s)</span>
      <button id="nextBtn">K√∂vetkez≈ë</button>
    </div>

    <footer>
      <p><a class="back-home" href="https://www.findora.hu">‚Üê Vissza a f≈ëoldalra</a></p>
      <p class="legal">A Findora.hu affiliate linkeket tartalmaz. A linkekre kattintva v√°s√°rl√°s eset√©n jutal√©kot kaphatunk; ez a v√°s√°rl√≥ sz√°m√°ra nem jelent pluszk√∂lts√©get.</p>
    </footer>
  </div>

  <a class="floating-home" href="https://www.findora.hu" aria-label="Vissza a f≈ëoldalra">‚Üê F≈ëoldal</a>

  <!-- ===== FIX, mindig l√°that√≥ affiliate-nyilatkozat ===== -->
  <div class="aff-disclosure" role="note" aria-label="Affiliate nyilatkozat">
    üîî <strong>Figyelem:</strong> A Findora.hu oldal affiliate linkeket tartalmaz.
    Az oldalon megjelen≈ë üîó linkek partnerlinkek lehetnek, amelyekre kattintva ‚Äî v√°s√°rl√°s eset√©n ‚Äî a Findora jutal√©kot kaphat.
    Ez a v√°s√°rl√≥ sz√°m√°ra nem jelent semmilyen pluszk√∂lts√©get.
    <!-- Ha van k√ºl√∂n szekci√≥: <a href="https://www.findora.hu/#nyilatkozatok">R√©szletek</a> -->
  </div>

  <script>
    const FEED_BASE = '/feeds/jateksziget';
    const PAGE_SIZE = 20, MAX_PAGES_TO_SCAN = 1000;
    let currentPage = 1, feedPage = 1;

    const grid = document.getElementById('grid');
    const pageInfo = document.getElementById('pageInfo');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const onlyDiscountEl = document.getElementById('onlyDiscount');
    const minDiscEl = document.getElementById('minDisc');
    const sortByEl = document.getElementById('sortBy');
    const categoryEl = document.getElementById('category');

    const KW = ['barbie','dreamhouse','ken','divatbaba','babah√°z','babahaz','j√°rm≈±','jarmu','√∂lt√∂zet','oltozet','kieg√©sz√≠t≈ë','kiegeszito'];
    const CAT_PATTERNS = {
      babak: ['barbie','ken','divatbaba','fashion doll'],
      szettek: ['szett','set','j√°t√©kszett','jatekszett','playset'],
      kiegeszitok: ['kieg√©sz√≠t≈ë','kiegeszito','ruha','outfit','cip≈ë','cipo','kell√©k','kellek'],
      'haz-jarmu': ['h√°z','haz','dreamhouse','j√°rm≈±','jarmu','aut√≥','auto','lak√≥kocsi','lakokocsi']
    };

    const toLower = s => (s || '').toLocaleLowerCase('hu-HU');
    function isBarbie(p){ const hay=`${toLower(p.title)} ${toLower(p.category||'')} ${(p.tags||[]).map(toLower).join(' ')}`; return KW.some(k=>hay.includes(k)); }
    function matchesCategory(p,key){
      if(key==='osszes') return true;
      const hay=`${toLower(p.title)} ${toLower(p.category||'')} ${(p.tags||[]).map(toLower).join(' ')}`;
      return (CAT_PATTERNS[key]||[]).some(k=>hay.includes(k));
    }

    function deeplink(u){ try{return `/api/dl?u=${encodeURIComponent(u)}&p=jateksziget`;}catch{return u;} }
    function priceNum(p){ if(p==null||p==='')return NaN; const n=String(p).replace(/[^\d.]/g,''); return n?Number(n):NaN; }
    function priceFmt(p){ const n=priceNum(p); return isNaN(n)?'':new Intl.NumberFormat('hu-HU').format(n)+' Ft'; }
    function cardHTML(it){
      const img=it.image||it.img||it.imageUrl||''; const d=it.discount||it.sale_percent||it.salePercent||0; const price=it.price||it.price_huf||it.final_price||'';
      return `<div class="card"><div class="thumb"><img loading="lazy" src="${img}" alt="${(it.title||'Term√©k').replace(/"/g,'&quot;')}" /></div><div class="title">${it.title||'Term√©k'}</div><div class="muted">${it.partner||'J√°t√©ksziget'}${d?` ‚Ä¢ ‚àí${d}%`:''}</div><div class="price">${priceFmt(price)}</div><div class="cta"><a href="${deeplink(it.url||it.link||'')}" target="_blank" rel="nofollow sponsored noopener noreferrer">Megn√©zem</a></div></div>`;
    }

    async function fetchFeedPage(n){ const res=await fetch(`${FEED_BASE}/page-${String(n).padStart(4,'0')}.json`,{cache:'no-store'}); if(!res.ok)return null; try{return await res.json();}catch{return null;} }
    async function renderPage(dir){
      grid.innerHTML=''; let collected=[], scanned=0;
      if(dir<0) feedPage=Math.max(1,feedPage-2);
      while(collected.length<PAGE_SIZE && scanned<MAX_PAGES_TO_SCAN){
        const data=await fetchFeedPage(feedPage); scanned++; feedPage++; if(!data) break;
        let items=Array.isArray(data.items)?data.items:[];
        items = items.filter(isBarbie);
        const catKey=categoryEl.value; items = items.filter(p=>matchesCategory(p,catKey));
        const onlyDiscount=onlyDiscountEl.checked; const minDisc=parseInt(minDiscEl.value||'0',10);
        if(onlyDiscount||minDisc>0){ items=items.filter(x=>{const d=Number(x.discount||x.sale_percent||x.salePercent||0); return (onlyDiscount?d>0:true)&&d>=minDisc;});}
        collected.push(...items);
        if(!data.nextPage) break;
      }
      const sortBy=sortByEl.value;
      collected.sort((a,b)=>{const pa=priceNum(a.price||a.price_huf||a.final_price||''), pb=priceNum(b.price||b.price_huf||b.final_price||''); if(isNaN(pa)&&isNaN(pb))return 0; if(isNaN(pa))return 1; if(isNaN(pb))return -1; return sortBy==='price-asc'?pa-pb:pb-pa;});
      const slice=collected.slice(0,PAGE_SIZE);
      grid.innerHTML = slice.map(cardHTML).join('') || `<div class="muted">Nincs tal√°lat a sz≈±r≈ëkre.</div>`;
      pageInfo.textContent=`${currentPage}. oldal ‚Ä¢ megjelen√≠tve: ${slice.length} t√©tel ‚Ä¢ beolvasott feed-oldalak: ${scanned}`;
      prevBtn.disabled=currentPage<=1;
    }
    nextBtn.addEventListener('click',()=>{currentPage++;renderPage(+1);});
    prevBtn.addEventListener('click',()=>{if(currentPage>1){currentPage--;renderPage(-1);}});
    [onlyDiscountEl,minDiscEl,sortByEl,categoryEl].forEach(el=>{el.addEventListener('change',()=>{currentPage=1;feedPage=1;renderPage(0);}); el.addEventListener('input',()=>{currentPage=1;feedPage=1;renderPage(0);});});
    renderPage(0);
  </script>
</body>
</html>
